!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueCoreImageUpload=e():t.VueCoreImageUpload=e()}(window,(function(){return a={},t.m=e=[,function(t,e,a){"use strict";a.r(e),e.default={_getImageType:function(t){var e="image/jpeg",a=t.match(/(image\/[\w]+)\.*/)[0];return void 0!==a&&(e=a),e},compress:function(t,e,a){var r=new FileReader,o=this;r.onload=function(r){var n=new Image;n.src=r.target.result,n.onload=function(){var r=o._getImageType(t.type),i=o._getCanvas(n.naturalWidth,n.naturalHeight),g=(i.getContext("2d").drawImage(n,0,0),i.toDataURL(r,e/100));a(g)}},r.readAsDataURL(t)},crop:function(t,e,a){function r(t){return"number"==typeof t}if(r(e.toCropImgX)&&r(e.toCropImgY)&&0<e.toCropImgW&&0<e.toCropImgH){var o=e.toCropImgW,n=e.toCropImgH;e.maxWidth&&e.maxWidth<o&&(o=e.maxWidth,n=e.toCropImgH*o/e.toCropImgW),e.maxHeight&&e.maxHeight<n&&(n=e.maxHeight);var i=this._getCanvas(o,n),g=(i.getContext("2d").drawImage(t,e.toCropImgX,e.toCropImgY,e.toCropImgW,e.toCropImgH,0,0,o,n),this._getImageType(t.src));a(i.toDataURL(g,e.compress/100))}},init:function(t,e){var a=new Image;a.src=t;var r=this;a.onload=function(){var t=r._getImageType(a.src),o=r._getCanvas(a.naturalWidth,a.naturalHeight);o.getContext("2d").drawImage(a,0,0);var n=o.toDataURL(t,100);e(n)}},rotate:function(t,e,a){var r=new Image;r.src=t.src;var o=this;r.onload=function(){var t=o._getImageType(r.src),n=o._getCanvas(r.naturalHeight,r.naturalWidth),i=n.getContext("2d");1==e?(i.rotate(90*Math.PI/180),i.translate(0,-n.width)):(i.rotate(-90*Math.PI/180),i.translate(-n.height,0)),i.drawImage(r,0,0);var g=n.toDataURL(t,100);a(g)}},resize:function(t,e,a){function r(t){return"number"==typeof t}if(r(e.toCropImgX)&&r(e.toCropImgY)&&0<e.toCropImgW&&0<e.toCropImgH){var o=e.toCropImgW*e.imgChangeRatio,n=e.toCropImgH*e.imgChangeRatio,i=this._getCanvas(o,n),g=(i.getContext("2d").drawImage(t,0,0,e.toCropImgW,e.toCropImgH,0,0,o,n),this._getImageType(t.src));a(i.toDataURL(g,e.compress/100))}},rotate2:function(t,e,a){var r=this;this._loadImage(t,(function(o){var n=o.naturalWidth,i=o.naturalHeight,g=Math.max(n,i),u=r._getCanvas(g,g),m=u.getContext("2d");m.save(),m.translate(g/2,g/2),m.rotate(e*(Math.PI/180));var c=-g/2,p=-g/2;if(0==(e%=360))return a(t,n,i);if(e%180!=0){-90===e||270===e?c=g/2-n:p=g/2-i;var d=n;n=i,i=d}else c=g/2-n,p=g/2-i;m.drawImage(o,c,p),r._getCanvas(n,i).getContext("2d").drawImage(u,0,0,n,i,0,0,n,i);var f=r._getImageType(o.src),s=u.toDataURL(f,1);a(s,n,i)}))},_loadImage:function(t,e){var a=new Image;a.src=t,a.onload=function(){e(a)},a.onerror=function(){}},_getCanvas:function(t,e){var a=document.createElement("canvas");return a.width=t,a.height=e,a}}}],t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=1);function t(r){if(a[r])return a[r].exports;var o=a[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e,a}));